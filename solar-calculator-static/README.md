# 太阳能ROI计算器 - 静态版本

这是一个基于原始 `solar-roi-calculator` React应用的纯静态HTML版本，**严格按照原版的样式、布局和逻辑实现**，使用Tailwind CSS和Chart.js，无需任何后端服务器或构建工具即可运行。

## ✨ 特性

- 📊 **完整的ROI计算** - 完全相同的计算逻辑，包括20年投资回报分析
- ⚡ **能量流可视化** - 24小时图表 + 能量流向图（两个标签页切换）
- 💰 **财务指标** - IRR、简单回收期、贴现回收期、自用率等
- 🗺️ **澳洲各州支持** - 针对8个州/领地的用电数据，自动更新
- 📅 **月度切换** - 支持查看12个月及年度平均的能量流
- 🎨 **原版样式** - 使用Tailwind CSS，完全还原原版的深色主题和布局
- 📱 **响应式设计** - 支持桌面端和移动端
- 🚀 **即开即用** - 无需安装依赖或启动服务器

## 🚀 使用方法

### 方法1: 直接打开HTML文件

1. 在文件浏览器中找到 `index.html` 文件
2. 双击文件，使用浏览器打开
3. 开始使用！

### 方法2: 使用本地服务器（推荐）

如果遇到CORS问题或想要更好的体验，可以使用简单的HTTP服务器：

```bash
# 使用Python (Python 3)
python3 -m http.server 8000

# 使用Python (Python 2)
python -m SimpleHTTPServer 8000

# 使用Node.js (需要安装 http-server)
npx http-server -p 8000

# 使用PHP
php -S localhost:8000
```

然后在浏览器中访问: `http://localhost:8000`

## 📁 文件结构

```
solar-calculator-static/
├── index.html       # 主HTML文件（使用Tailwind CSS）
├── data.js          # 澳洲各州数据常量
├── calculator.js    # 核心计算逻辑（直接翻译自useSolarSimulation.ts）
├── ui.js            # UI渲染和交互逻辑
└── README.md        # 本文件
```

## 🎯 与原版的对照

本静态版本严格按照原版实现，确保：
- ✅ **相同的计算逻辑** - 直接从TypeScript翻译为JavaScript
- ✅ **相同的UI布局** - 使用Tailwind CSS类名，保持一致的样式
- ✅ **相同的组件结构** - KPI卡片、参数控制、能量流图、ROI图表
- ✅ **相同的交互方式** - 月度选择器、标签页切换
- ✅ **相同的数据模型** - 澳洲各州的月度/小时用电模式

## 🎯 功能说明

### 输入参数

- **所在州/领地**: 选择澳洲的州或领地，会自动调整默认用电量
- **年用电量**: 家庭年度总用电量 (kWh)
- **系统功率**: 太阳能系统的安装功率 (kWp)
- **年发电系数**: 每千瓦系统的年发电量 (kWh/kWp)
- **电池容量**: 储能电池容量 (kWh)
- **投资成本**: 系统总投资金额 ($)
- **电价**: 当前电价 ($/kWh)
- **上网电价**: 卖电给电网的价格 ($/kWh)
- **电价通胀率**: 预期年度电价增长率 (%)
- **面板衰减率**: 太阳能板年度性能衰减率 (%)
- **每日固定费用**: 电网连接的固定日费 ($)
- **电池更换成本**: 第10年电池更换费用 ($)
- **贴现率**: 用于NPV计算的贴现率 (%)

### 输出结果

#### 关键指标 (KPIs)
- **自用率**: 自己消费的发电量占总发电量的百分比
- **投资回收期（简单）**: 不考虑货币时间价值的回收期
- **投资回收期（贴现）**: 考虑货币时间价值的回收期
- **20年IRR**: 内部收益率
- **年发电量**: 系统年度总发电量

#### 可视化图表
- **日均能量流动图**: 展示24小时的发电、用电和购电情况
- **20年投资回报图**: 展示累计节省金额的变化趋势

#### 详细数据
- 年度能源数据汇总
- 20年逐年财务预测表

## 🔧 技术实现

### 核心计算逻辑

1. **能量流计算**
   - 基于澳洲各州的月度和小时用电模式
   - 计算直接自用、电池储能和电网交互
   - 考虑电池容量限制和充放电效率

2. **财务分析**
   - 20年现金流预测
   - 考虑电价通胀和面板衰减
   - IRR计算使用二分法求解
   - 简单回收期和贴现回收期

### 使用的库

- **Tailwind CSS (CDN)**: 用于样式，与原版配置一致
- **Chart.js 4.4.1**: 用于数据可视化
- 纯原生JavaScript实现，无需React或其他框架

## 🎨 自定义

### 修改默认值

编辑 `index.html` 中对应的 `value` 属性：

```html
<input type="number" id="systemPower" value="8" step="0.5">
```

### 修改样式

编辑 `styles.css` 文件，可以自定义：
- 颜色方案
- 字体大小
- 布局间距
- 响应式断点

### 修改计算逻辑

编辑 `calculator.js` 文件中的常量或函数：
- 修改月度发电百分比
- 调整小时发电因子
- 更新各州用电数据

## 📊 数据来源

本计算器使用的数据基于：
- 澳洲各州典型家庭用电模式
- PVGIS太阳能发电数据
- 行业标准的系统衰减率

**注意**: 这些都是模拟数据，实际结果会因具体情况而异。

## 🐛 故障排除

### 图表不显示
- 检查是否有网络连接（Chart.js从CDN加载）
- 尝试使用本地服务器而不是直接打开文件

### 计算结果异常
- 确保所有输入值都是合理的正数
- 检查浏览器控制台是否有错误信息

### 样式显示异常
- 确保三个文件在同一目录下
- 清除浏览器缓存后重试

## 📝 许可证

本项目基于原始 `solar-roi-calculator` 项目改编，仅供学习和参考使用。

## 🔄 与原项目的区别

| 功能 | React版本 | 静态版本 |
|------|----------|----------|
| 运行方式 | 需要Node.js和npm | 直接打开HTML |
| 依赖安装 | 需要 | 不需要 |
| 构建步骤 | 需要 | 不需要 |
| UI框架 | React + Recharts | 原生JS + Chart.js |
| 样式系统 | Tailwind CSS | Tailwind CSS (CDN) |
| 月度切换 | ✅ 支持 | ✅ 支持 |
| 能量流图 | ✅ 支持 | ✅ 支持 |
| 能量流向图 | ✅ 支持 | ✅ 支持 |
| 导出CSV | ✅ 支持 | ❌ 未实现 |
| 详细计算分解 | ✅ 支持 | ❌ 简化版 |
| 核心计算逻辑 | ✅ 完整 | ✅ 完整 |
| KPI显示 | ✅ 5个指标 | ✅ 5个指标 |
| 20年预测图表 | ✅ 组合图 | ✅ 组合图 |

## 🚀 未来改进

- [ ] 添加数据导出为CSV功能
- [ ] 添加详细计算分解页面
- [ ] 添加月度发电/用电分布图表
- [ ] 添加小时能量分布图表
- [ ] 添加打印友好版本
- [ ] 支持更多国家/地区
- [ ] 离线Chart.js和Tailwind支持

## 💡 提示

建议在现代浏览器中使用本计算器以获得最佳体验：
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

---

**祝您使用愉快！如有问题或建议，欢迎反馈。**
