<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»ŸæŠ•å…¥è®¡ç®—å™¨</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .card { background: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 20px; font-size: 24px; }
        h2 { color: #555; margin-bottom: 15px; font-size: 18px; border-bottom: 2px solid #4CAF50; padding-bottom: 8px; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .form-group { display: flex; flex-direction: column; }
        label { font-size: 13px; color: #666; margin-bottom: 5px; font-weight: 500; }
        input { padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        input:focus { outline: none; border-color: #4CAF50; }
        button { background: #4CAF50; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer; font-size: 16px; margin-top: 15px; }
        button:hover { background: #45a049; }
        .result-section { margin-top: 10px; }
        .calc-step { background: #f9f9f9; padding: 12px; margin-bottom: 10px; border-radius: 4px; border-left: 3px solid #4CAF50; }
        .calc-step-title { font-weight: 600; color: #333; margin-bottom: 5px; }
        .calc-detail { font-size: 13px; color: #666; margin-left: 10px; line-height: 1.6; }
        .final-result { background: #e8f5e9; padding: 15px; border-radius: 4px; font-size: 18px; font-weight: 600; color: #2e7d32; text-align: center; }
        .tabs { display: flex; gap: 10px; margin-bottom: 15px; }
        .tab { padding: 8px 16px; background: #eee; border: none; border-radius: 4px; cursor: pointer; }
        .tab.active { background: #4CAF50; color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>ğŸ”‹ ç³»ç»ŸæŠ•å…¥è®¡ç®—å™¨</h1>
            
            <div class="tabs">
                <button class="tab active" onclick="switchTab('roof')">å±‹é¡¶å‚æ•°</button>
                <button class="tab" onclick="switchTab('plan')">æ–¹æ¡ˆå‚æ•°</button>
                <button class="tab" onclick="switchTab('device')">è®¾å¤‡å‚æ•°</button>
                <button class="tab" onclick="switchTab('cost')">æˆæœ¬å‚æ•°</button>
                <button class="tab" onclick="switchTab('subsidy')">è¡¥è´´å‚æ•°</button>
            </div>

            <form id="calcForm">
                <!-- å±‹é¡¶å‚æ•° -->
                <div id="roof" class="tab-content active">
                    <h2>å±‹é¡¶å‚æ•°</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>å±‹é¡¶ç†è®ºæœ€å¤§é¢æ¿æ•°é‡ (å—)</label>
                            <input type="number" name="roof_max_panels" value="37" required>
                        </div>
                        <div class="form-group">
                            <label>é¡¹ç›®ç±»å‹</label>
                            <select name="project_type" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="new">æ–°å»ºç³»ç»Ÿ</option>
                                <option value="battery_expansion">å‚¨èƒ½æ‰©å®¹</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>åœ°åŒº</label>
                            <select name="region" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="NSW">NSW</option>
                                <option value="VIC">VIC</option>
                                <option value="QLD">QLD</option>
                                <option value="SA">SA</option>
                                <option value="WA">WA</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- æ–¹æ¡ˆå‚æ•° -->
                <div id="plan" class="tab-content">
                    <h2>æ–¹æ¡ˆå‚æ•°</h2>
                    <div style="background: #f0f8ff; padding: 10px; border-radius: 4px; margin-bottom: 15px; font-size: 13px;">
                        <strong>æ–¹æ¡ˆè¯´æ˜ï¼š</strong><br>
                        â€¢ æ–¹æ¡ˆAï¼šæŸ¥è¯¢GSåŠŸç‡æ˜ å°„è¡¨<br>
                        â€¢ æ–¹æ¡ˆBï¼šæŸ¥è¯¢GDåŠŸç‡æ˜ å°„è¡¨<br>
                        â€¢ æ–¹æ¡ˆCï¼šä½¿ç”¨å…¬å¼è®¡ç®—ï¼ŒåŸºäºç›®æ ‡è‡ªç”¨ç‡<br>
                        â€¢ å‚¨èƒ½æ‰©å®¹ï¼šä¸‰ä¸ªæ–¹æ¡ˆéƒ½ä½¿ç”¨ç›¸åŒçš„å‚¨èƒ½æ‰©å®¹å®¹é‡ç³»æ•°
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>æ–¹æ¡ˆAå®¹é‡ç³»æ•°</label>
                            <input type="number" step="0.01" name="plan_a_capacity_factor" value="0.9" required>
                        </div>
                        <div class="form-group">
                            <label>æ–¹æ¡ˆBå®¹é‡ç³»æ•°</label>
                            <input type="number" step="0.01" name="plan_b_capacity_factor" value="0.9" required>
                        </div>
                        <div class="form-group">
                            <label>æ–¹æ¡ˆCå®¹é‡ç³»æ•°</label>
                            <input type="number" step="0.01" name="plan_c_capacity_factor" value="0.9" required>
                        </div>
                        <div class="form-group">
                            <label>æ–¹æ¡ˆCç›®æ ‡è‡ªç”¨ç‡</label>
                            <input type="number" step="0.01" name="plan_c_target_sc_rate" value="0.5" required>
                        </div>
                        <div class="form-group">
                            <label>åŸºçº¿è‡ªç”¨ç‡ (æ— ç”µæ± )</label>
                            <input type="number" step="0.01" name="baseline_self_consumption_rate" value="0.3" required>
                        </div>
                        <div class="form-group">
                            <label>å‚¨èƒ½æ‰©å®¹å®¹é‡ç³»æ•°</label>
                            <input type="number" step="0.01" name="battery_expansion_capacity_factor" value="0.7" required>
                        </div>
                    </div>
                </div>

                <!-- è®¾å¤‡å‚æ•° -->
                <div id="device" class="tab-content">
                    <h2>è®¾å¤‡å‚æ•°</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>é¢æ¿å•å…ƒåŠŸç‡ (kW)</label>
                            <input type="number" step="0.01" name="panel_power_kw" value="0.44" required>
                        </div>
                        <div class="form-group">
                            <label>å®¹é…æ¯” (DC/AC)</label>
                            <input type="number" step="0.1" name="dc_ac_ratio" value="1.5" required>
                        </div>
                        <div class="form-group">
                            <label>æ¯kWå¹´å‘ç”µé‡ (kWh/kW/yr)</label>
                            <input type="number" step="1" name="yield_per_kw_per_year" value="1526" required>
                        </div>
                        <div class="form-group">
                            <label>ç”µæ± æ”¾ç”µæ·±åº¦ DoD</label>
                            <input type="number" step="0.01" name="battery_dod" value="0.9" required>
                        </div>
                        <div class="form-group">
                            <label>ç”µæ± å¾€è¿”æ•ˆç‡ RTE</label>
                            <input type="number" step="0.01" name="battery_rte" value="0.95" required>
                        </div>
                    </div>
                </div>

                <!-- æˆæœ¬å‚æ•° -->
                <div id="cost" class="tab-content">
                    <h2>æˆæœ¬ä¸åˆ©æ¶¦å‚æ•°</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>é¢æ¿å•ä»· (AUD/å—)</label>
                            <input type="number" step="0.01" name="panel_unit_cost" value="80" required>
                        </div>
                        <div class="form-group">
                            <label>é¢æ¿åˆ©æ¶¦ç‡</label>
                            <input type="number" step="0.01" name="panel_profit_margin" value="0.3" required>
                        </div>
                        <div class="form-group">
                            <label>é€†å˜å™¨å•ä»· (AUD/kW)</label>
                            <input type="number" step="0.01" name="inverter_unit_cost" value="200" required>
                        </div>
                        <div class="form-group">
                            <label>é€†å˜å™¨åˆ©æ¶¦ç‡</label>
                            <input type="number" step="0.01" name="inverter_profit_margin" value="0.3" required>
                        </div>
                        <div class="form-group">
                            <label>ç”µæ± å•ä»· (AUD/kWh)</label>
                            <input type="number" step="0.01" name="battery_unit_cost" value="320" required>
                        </div>
                        <div class="form-group">
                            <label>ç”µæ± åˆ©æ¶¦ç‡</label>
                            <input type="number" step="0.01" name="battery_profit_margin" value="0.3" required>
                        </div>
                        <div class="form-group">
                            <label>å…‰ä¼åŸºç¡€å®‰è£…è´¹ (AUD)</label>
                            <input type="number" step="0.01" name="install_base_cost" value="1000" required>
                        </div>
                        <div class="form-group">
                            <label>å…‰ä¼å®‰è£…åˆ©æ¶¦ç‡</label>
                            <input type="number" step="0.01" name="install_profit_margin" value="0.3" required>
                        </div>
                        <div class="form-group">
                            <label>å…‰ä¼æ¯kWå®‰è£…è´¹ (AUD/kW)</label>
                            <input type="number" step="0.01" name="install_cost_per_kw" value="150" required>
                        </div>
                        <div class="form-group">
                            <label>ç”µæ± åŸºç¡€å®‰è£…è´¹ (AUD)</label>
                            <input type="number" step="0.01" name="battery_install_base_cost" value="1000" required>
                        </div>
                        <div class="form-group">
                            <label>ç”µæ± å®‰è£…åˆ©æ¶¦ç‡</label>
                            <input type="number" step="0.01" name="battery_install_profit_margin" value="0.3" required>
                        </div>
                        <div class="form-group">
                            <label>ç”µæ± æ¯kWhå®‰è£…è´¹ (AUD/kWh)</label>
                            <input type="number" step="0.01" name="battery_install_cost_per_kwh" value="250" required>
                        </div>
                        <div class="form-group">
                            <label>é™„åŠ è´¹ç”¨ (AUD)</label>
                            <input type="number" step="0.01" name="additional_charges" value="0" required>
                        </div>
                        <div class="form-group">
                            <label>GSTç¨ç‡</label>
                            <input type="number" step="0.01" name="gst_rate" value="0.1" required>
                        </div>
                    </div>
                </div>

                <!-- è¡¥è´´å‚æ•° -->
                <div id="subsidy" class="tab-content">
                    <h2>è¡¥è´´å‚æ•°</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Zone Rating (é‚®ç¼–åŒºåŸŸä¹˜æ•°)</label>
                            <input type="number" step="0.001" name="zone_rating" value="1.382" required>
                        </div>
                        <div class="form-group">
                            <label>Deeming Period (å¹´)</label>
                            <input type="number" name="deeming_period" value="6" required>
                        </div>
                        <div class="form-group">
                            <label>PV STCå•ä»· (AUD)</label>
                            <input type="number" step="0.01" name="pv_stc_price" value="39" required>
                        </div>
                        <div class="form-group">
                            <label>ç”µæ± æ¯kWh STCå› å­</label>
                            <input type="number" step="0.1" name="battery_stc_factor" value="9.3" required>
                        </div>
                        <div class="form-group">
                            <label>Battery STCå•ä»· (AUD)</label>
                            <input type="number" step="0.01" name="battery_stc_price" value="39" required>
                        </div>
                        <div class="form-group">
                            <label>VICå·è¡¥è´´ (AUD)</label>
                            <input type="number" step="0.01" name="vic_rebate" value="1400" required>
                        </div>
                        <div class="form-group">
                            <label>VICå·æ— æ¯è´·æ¬¾ (AUD)</label>
                            <input type="number" step="0.01" name="vic_loan" value="1400" required>
                        </div>
                        <div class="form-group">
                            <label>NSW PRCå•ä»· (AUD)</label>
                            <input type="number" step="0.01" name="nsw_prc_price" value="1.65" required>
                        </div>
                        <div class="form-group">
                            <label>ç½‘ç»œæŸè€—ç³»æ•°</label>
                            <input type="number" step="0.001" name="network_loss_factor" value="1.05" required>
                        </div>
                        <div class="form-group">
                            <label>å®‰è£…å•†é¢å¤–è¡¥è´´ (AUD)</label>
                            <input type="number" step="0.01" name="installer_subsidy" value="0" required>
                        </div>
                    </div>
                </div>

                <button type="submit">ğŸ’° è®¡ç®—ABCä¸‰å¥—æ–¹æ¡ˆ</button>
            </form>
        </div>

        <div id="results" class="card" style="display: none;">
            <h1>ğŸ“Š è®¡ç®—ç»“æœ</h1>
            <div id="resultContent"></div>
        </div>
    </div>

    <script src="calculator.js"></script>
</body>
</html>
